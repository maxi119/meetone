<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>剩單不孤單，今天也剩單嗎</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>


    <link rel="stylesheet" href="common.css">
    <script src="home.js" type="text/babel"></script>
    <script src="activity.js" type="text/babel"></script>
    <script src="about.js" type="text/babel"></script>
    <script src="testing.js" type="text/babel"></script>
    <script src="collections.js" type="text/babel"></script>
    <script src="qrcode.js" type="text/babel"></script>
</head>
<body>
    <div id="qr"></div>
    <div id="root"></div>

    <script type="text/babel">
        
        // generateQRCode('hellow world 中', 'qr')    


        function App() {
            const [currentPage, setCurrentPage] = React.useState('home');
            const navbarToggleRef = React.useRef(null);
            const navbarCollapseRef = React.useRef(null);

            const closeNavbar = () => {
                // 检查是否在小屏幕模式（菜单是否展开）
                if (window.innerWidth < 992) { // Bootstrap lg breakpoint
                    // 使用 Bootstrap collapse API 关闭菜单
                    const bsCollapse = new bootstrap.Collapse(navbarCollapseRef.current, {
                        toggle: false
                    });
                    bsCollapse.hide();
                }
            };

            const handleNavigation = (page, e) => {
                e.preventDefault();
                setCurrentPage(page);
                closeNavbar();
            };

            const menuItem = (displayName, pageName )=>{
                return ( <li className="nav-item">
                                        <a 
                                            className={`nav-link ${currentPage === pageName ? 'active' : ''}`} 
                                            href="#"
                                            onClick={(e) => handleNavigation(pageName, e)}
                                        >
                                            {displayName}
                                        </a>
                                    </li> )
            }

            return (
                <div>
                    <nav className="navbar navbar-expand-lg navbar-light bg-light fixed-top">
                        <div className="container-fluid toptitle">
                            <a className="navbar-brand" href="#">剩單不孤單</a>
                            <button 
                                className="navbar-toggler" 
                                type="button" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#navbarNav"
                                ref={navbarToggleRef}
                            >
                                <span className="navbar-toggler-icon"></span>
                            </button>
                            <div 
                                className="collapse navbar-collapse" 
                                id="navbarNav"
                                ref={navbarCollapseRef}
                            >
                                <ul className="navbar-nav">
                                    {menuItem("首頁", "home")}
                                    {menuItem("關於", "about")}
                                    {menuItem("活動", "activity")}
                                    {menuItem("小測驗", "testing")}
                                    {menuItem("收集小卡", "collections")}
                                    {menuItem("關於我們", "about")}
                                   
                                </ul>
                            </div>
                        </div>
                    </nav>

                    {currentPage === 'home' && <HomePage />}
                    {currentPage === 'about' && <AboutPage />}
                    {currentPage === 'activity' && <ActivtyPage />}
                    {currentPage === 'testing' && <MBTITest />}
                    {currentPage === 'collections' && <CollectionBook />}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>


</body>
</html>
